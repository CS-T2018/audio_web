<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>build/ui.vk.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/sunburst.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc" style="padding-top:16px;">
    <div class="yui3-g">
        <table style="width:auto">
            <tr style="background:none">
                <td valign="top" align="left" >
                    <div id="sidebar" class="yui3-u">
                        <div id="classes" class="sidebox">
                            <div class="hd">
                                <h2 class="no-toc">All packages</h2>
                            </div>
                            <div class="bd">
                                <ul>
                                        <li>
                                            <a href="../classes/ui.date.html">ui.date</a>
                                        </li>
                                        <li>
                                            <a href="../classes/ui.vk.html">ui.vk</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.html">zebkit</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.data.html">zebkit.data</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.io.html">zebkit.io</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.layout.html">zebkit.layout</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.ui.html">zebkit.ui</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.ui.design.html">zebkit.ui.design</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.ui.grid.html">zebkit.ui.grid</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.ui.html.html">zebkit.ui.html</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.ui.tree.html">zebkit.ui.tree</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.util.html">zebkit.util</a>
                                        </li>
                                        <li>
                                            <a href="../classes/zebkit.web.html">zebkit.web</a>
                                        </li>
                                </ul>
                            </div>
                        </div>
                        
                        
                        <div id="classes" class="sidebox">
                            <div class="hd">
                                <h2 class="no-toc">All classes</h2>
                            </div>
                            <div class="bd">
                                <table style="background:none;" border="0">
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.Class.html">zebkit.Class</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.data.Item.html">zebkit.data.Item</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.data.ListModel.html">zebkit.data.ListModel</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.data.Matrix.html">zebkit.data.Matrix</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.data.SingleLineTxt.html">zebkit.data.SingleLineTxt</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.data.Text.html">zebkit.data.Text</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.data.TextModel.html">zebkit.data.TextModel</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.data.TreeModel.html">zebkit.data.TreeModel</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.DoIt.html">zebkit.DoIt</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.Dummy.html">zebkit.Dummy</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.Interface.html">zebkit.Interface</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.io.HTTP.html">zebkit.io.HTTP</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.io.JRPC.html">zebkit.io.JRPC</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.io.Service.html">zebkit.io.Service</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.io.XRPC.html">zebkit.io.XRPC</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.BorderLayout.html">zebkit.layout.BorderLayout</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.Constraints.html">zebkit.layout.Constraints</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.FlowLayout.html">zebkit.layout.FlowLayout</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.GridLayout.html">zebkit.layout.GridLayout</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.Layout.html">zebkit.layout.Layout</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.Layoutable.html">zebkit.layout.Layoutable</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.ListLayout.html">zebkit.layout.ListLayout</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.PercentLayout.html">zebkit.layout.PercentLayout</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.RasterLayout.html">zebkit.layout.RasterLayout</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.layout.StackLayout.html">zebkit.layout.StackLayout</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.TooltippupManager.html">zebkit.TooltippupManager</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ArrowButton.html">zebkit.ui.ArrowButton</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.BaseList.html">zebkit.ui.BaseList</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.BaseTextRender.html">zebkit.ui.BaseTextRender</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.BoldLabel.html">zebkit.ui.BoldLabel</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Border.html">zebkit.ui.Border</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.BorderPan.html">zebkit.ui.BorderPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Button.html">zebkit.ui.Button</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ButtonRepeatMix.html">zebkit.ui.ButtonRepeatMix</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Checkbox.html">zebkit.ui.Checkbox</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Checkbox.Box.html">zebkit.ui.Checkbox.Box</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ClipboardSupport.html">zebkit.ui.ClipboardSupport</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.CollapsiblePan.html">zebkit.ui.CollapsiblePan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Combo.html">zebkit.ui.Combo</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Combo.ComboPadPan.html">zebkit.ui.Combo.ComboPadPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Combo.ContentPan.html">zebkit.ui.Combo.ContentPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Combo.EditableContentPan.html">zebkit.ui.Combo.EditableContentPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Combo.ReadonlyContentPan.html">zebkit.ui.Combo.ReadonlyContentPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.CompEvent.html">zebkit.ui.CompEvent</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.CompList.html">zebkit.ui.CompList</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.CompositeEvStatePan.html">zebkit.ui.CompositeEvStatePan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.CompositeView.html">zebkit.ui.CompositeView</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.CompRender.html">zebkit.ui.CompRender</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Cursor.html">zebkit.ui.Cursor</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.CursorManager.html">zebkit.ui.CursorManager</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.date.DaysGrid.html">zebkit.ui.date.DaysGrid</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.design.FormTreeModel.html">zebkit.ui.design.FormTreeModel</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.design.ShaperBorder.html">zebkit.ui.design.ShaperBorder</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.design.ShaperPan.html">zebkit.ui.design.ShaperPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Dotted.html">zebkit.ui.Dotted</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Etched.html">zebkit.ui.Etched</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.EventManager.html">zebkit.ui.EventManager</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.EvStatePan.html">zebkit.ui.EvStatePan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.FocusEvent.html">zebkit.ui.FocusEvent</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.FocusManager.html">zebkit.ui.FocusManager</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Font.html">zebkit.ui.Font</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Gradient.html">zebkit.ui.Gradient</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.grid.BaseCaption.html">zebkit.ui.grid.BaseCaption</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.grid.CompGridCaption.html">zebkit.ui.grid.CompGridCaption</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.grid.CompGridCaption.TitlePan.html">zebkit.ui.grid.CompGridCaption.TitlePan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.grid.DefEditors.html">zebkit.ui.grid.DefEditors</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.grid.DefViews.html">zebkit.ui.grid.DefViews</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.grid.Grid.html">zebkit.ui.grid.Grid</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.grid.GridCaption.html">zebkit.ui.grid.GridCaption</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.grid.GridStretchPan.html">zebkit.ui.grid.GridStretchPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.grid.Metrics.html">zebkit.ui.grid.Metrics</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Group.html">zebkit.ui.Group</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.html.HtmlLink.html">zebkit.ui.html.HtmlLink</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.html.HtmlTextArea.html">zebkit.ui.html.HtmlTextArea</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.html.HtmlTextField.html">zebkit.ui.html.HtmlTextField</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.html.HtmlTextInput.html">zebkit.ui.html.HtmlTextInput</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.HtmlCanvas.html">zebkit.ui.HtmlCanvas</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.HtmlElement.html">zebkit.ui.HtmlElement</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.HtmlWinCanvas.html">zebkit.ui.HtmlWinCanvas</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ImageLabel.html">zebkit.ui.ImageLabel</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ImagePan.html">zebkit.ui.ImagePan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.KeyEvent.html">zebkit.ui.KeyEvent</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.KeyEventUninfier.html">zebkit.ui.KeyEventUninfier</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Label.html">zebkit.ui.Label</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Line.html">zebkit.ui.Line</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Link.html">zebkit.ui.Link</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.List.html">zebkit.ui.List</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.List.ViewProvider.html">zebkit.ui.List.ViewProvider</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Manager.html">zebkit.ui.Manager</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Menu.html">zebkit.ui.Menu</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Menubar.html">zebkit.ui.Menubar</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.MenuEvent.html">zebkit.ui.MenuEvent</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.MenuItem.html">zebkit.ui.MenuItem</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.MobileScrollMan.html">zebkit.ui.MobileScrollMan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Panel.html">zebkit.ui.Panel</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.PassTextField.html">zebkit.ui.PassTextField</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.PasswordText.html">zebkit.ui.PasswordText</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Pattern.html">zebkit.ui.Pattern</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Picture.html">zebkit.ui.Picture</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.PointerEvent.html">zebkit.ui.PointerEvent</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.PopupLayerMix.html">zebkit.ui.PopupLayerMix</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Progress.html">zebkit.ui.Progress</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Radial.html">zebkit.ui.Radial</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Radiobox.html">zebkit.ui.Radiobox</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.RadioView.html">zebkit.ui.RadioView</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Raised.html">zebkit.ui.Raised</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Render.html">zebkit.ui.Render</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.RootLayer.html">zebkit.ui.RootLayer</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.RoundBorder.html">zebkit.ui.RoundBorder</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Scroll.html">zebkit.ui.Scroll</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ScrollManager.html">zebkit.ui.ScrollManager</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ScrollPan.html">zebkit.ui.ScrollPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ShortcutEvent.html">zebkit.ui.ShortcutEvent</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ShortcutManager.html">zebkit.ui.ShortcutManager</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Slider.html">zebkit.ui.Slider</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.SplitPan.html">zebkit.ui.SplitPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.StackPan.html">zebkit.ui.StackPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.StatePan.html">zebkit.ui.StatePan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.StatusBar.html">zebkit.ui.StatusBar</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.StringRender.html">zebkit.ui.StringRender</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Sunken.html">zebkit.ui.Sunken</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Switchable.html">zebkit.ui.Switchable</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.SwitchManager.html">zebkit.ui.SwitchManager</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Tabs.html">zebkit.ui.Tabs</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Tabs.TabView.html">zebkit.ui.Tabs.TabView</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.TextArea.html">zebkit.ui.TextArea</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.TextField.html">zebkit.ui.TextField</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.TextField.HintRender.html">zebkit.ui.TextField.HintRender</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.TextRender.html">zebkit.ui.TextRender</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.TitledBorder.html">zebkit.ui.TitledBorder</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ToggleView.html">zebkit.ui.ToggleView</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Toolbar.html">zebkit.ui.Toolbar</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Tooltip.html">zebkit.ui.Tooltip</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.tree.BaseTree.html">zebkit.ui.tree.BaseTree</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.tree.CompTree.html">zebkit.ui.tree.CompTree</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.tree.DefEditors.html">zebkit.ui.tree.DefEditors</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.tree.DefViews.html">zebkit.ui.tree.DefViews</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.tree.Tree.html">zebkit.ui.tree.Tree</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.View.html">zebkit.ui.View</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ViewPan.html">zebkit.ui.ViewPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.ViewSet.html">zebkit.ui.ViewSet</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.web.VideoPan.html">zebkit.ui.web.VideoPan</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.Window.html">zebkit.ui.Window</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.WinEvent.html">zebkit.ui.WinEvent</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.WinLayer.html">zebkit.ui.WinLayer</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.ui.zCanvas.html">zebkit.ui.zCanvas</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.URI.html">zebkit.URI</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.util.Event.html">zebkit.util.Event</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.util.Listeners.html">zebkit.util.Listeners</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.util.Position.html">zebkit.util.Position</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.util.Position.Metric.html">zebkit.util.Position.Metric</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.util.rgb.html">zebkit.util.rgb</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.util.SingleColPosition.html">zebkit.util.SingleColPosition</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.util.TasksSet.html">zebkit.util.TasksSet</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.util.TasksSet.Task.html">zebkit.util.TasksSet.Task</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.util.Zson.html">zebkit.util.Zson</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                               <a href="../classes/zebkit.web.MouseWheelSupport.html">zebkit.web.MouseWheelSupport</a>
                                            </td>
                                        </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </td>

                <td valign="top" align="left">
                    <div id="main" class="yui3-u">
                        <div class="content"><h4>build/ui.vk.js</h4>

<pre class="code prettyprint linenums">
zebkit.package(&quot;ui.vk&quot;, function(pkg, Class) {
    var ui = zebkit.ui;

    pkg.$vk = null;
    pkg.makeEditorVisible = true;

    pkg.KeyEvent = Class(ui.KeyEvent, [
        function $prototype() {
            this.withMasks = function(masks) {
                this.altKey   = false;
                this.shiftKey = false;
                this.ctrlKey  = false;
                this.metaKey  = false;

                for(var k in masks) {
                    this[k] = masks[k];
                }
            };
        }
    ]);


    /**
     * Virtual keyboard implementation
     * @class  ui.vk
     * @access package
     */
    pkg.VKLayout = Class(zebkit.layout.Layout, [
        function $prototype () {
            this.ratio = this.gap = 2;

            this.doLayout = function(t) {
                var m     =  this.keyboardMetrics(t),
                    rows  =  m.rows,
                    row   = -1,
                    x     =  0,
                    y     =  0,
                    i     =  0,
                    r     =  null,
                    left  =  t.getLeft(),
                    top   =  t.getTop(),
                    ew    =  t.width - left - t.getRight(),
                    extra =  1000000;

                // compute extra alignment for fixed size keys to
                // take larger than preferred size horizontal
                // space
                for(i = 0; i &lt; rows.length; i++) {
                    if (rows[i].fixKeys !== 0) {
                        r  = rows[i];
                        var w  = (r.keys &gt; 0 ? r.keys - 1 : 0) * this.gap + m.fixKeyWidth * r.fixKeys + r.occupiedHorSpace,
                            ex = ew - w;

                        ex =  Math.round(ex/r.fixKeys);
                        if (extra &gt; ex) {
                            extra = ex;
                        }
                    }
                }

                // calculate final fixed size key size
                if (extra !== 1000000 &amp;&amp; extra !== 0) {
                    m.fixKeyWidth += extra;

                    // check if key proportion is good, otherwise again correct fixed key size
                    if (m.fixKeyWidth / m.rowHeight &gt; this.ratio) {
                        m.fixKeyWidth = Math.floor(m.rowHeight * this.ratio);
                    }

                    // re-calculate keyboard width
                    m.width = this.maxRowWidth(rows, m.fixKeyWidth);
                }

                for (i = 0; i &lt; t.kids.length; i++) {
                    var k = t.kids[i], ctr = k.constraints;

                    r = m.rows[ctr.row];

                    if (row !== ctr.row) {
                        row ++;
                        y += (row === 0 ? top : this.gap + m.rowHeight);

                        // compute actual width the row occupies
                        var aw = r.fixKeys * m.fixKeyWidth + r.occupiedHorSpace + (r.keys &gt; 0 ? r.keys - 1 : 0) * this.gap;

                        if (r.stretchedKeys === 0) {
                            x = left + Math.floor((ew - aw) / 2);
                        } else {
                            x  = left + Math.floor((ew - m.width) / 2);
                            extra = Math.floor((m.width - aw) / r.stretchedKeys);
                        }
                    }

                    if (k.isVisible === true) {
                        if (typeof ctr.size === &#x27;undefined&#x27; || ctr.size === null) {
                            k.setSize(m.fixKeyWidth, m.rowHeight);
                        } else {
                            var ps = k.getPreferredSize();
                            if (ctr.size === &quot;stretched&quot;) {
                                k.setSize(ps.width + extra, m.rowHeight);
                            } else {
                                k.setSize(ps.width, m.rowHeight);
                            }
                        }

                        k.setLocation(x, y);
                        x += this.gap + k.width;
                    }
                }
            };

            this.calcPreferredSize = function(t) {
                var m = this.keyboardMetrics(t);
                return {
                    width : m.width,
                    height: m.height
                };
            };

            this.maxRowWidth = function(rows, fixKeyWidth) {
                // calculate preferred size
                var width = 0;
                for(var i = 0; i &lt; rows.length; i++) {
                    var r    = rows[i],
                        w    = (r.keys &gt; 0 ? r.keys - 1 : 0) * this.gap + fixKeyWidth * r.fixKeys + r.occupiedHorSpace;
                    if (w &gt; width) width = w;
                }
                return width;
            };

            this.keyboardMetrics = function(t) {
                var rows             = [],
                    rowHeight        = 0,
                    fixKeyWidth      = 0;

                for(var row = 0;  ;row++) {
                    var r = this.rowMetric(row, t);
                    if (r === null) break;

                    rows.push(r);
                    if (r.fixKeyMaxWidth &gt; fixKeyWidth) fixKeyWidth = r.fixKeyMaxWidth;
                    if (r.rowHeight      &gt; rowHeight  ) rowHeight   = r.rowHeight;
                }

                // check if key proportion is good, otherwise again correct fixed key size
                if (fixKeyWidth / rowHeight &gt; this.ratio) {
                    fixKeyWidth = Math.floor(rowHeight * this.ratio);
                }

                return {
                    rows         : rows,
                    rowHeight    : rowHeight,
                    fixKeyWidth  : fixKeyWidth,
                    width        : this.maxRowWidth(rows, fixKeyWidth),
                    height       : rows.length * rowHeight + (rows.length &gt; 0 ? rows.length - 1 : 0) * this.gap
                };
            };

            this.rowMetric = function(row, t) {
                var fixKeys           = 0,
                    prefKeys          = 0,
                    stretchedKeys     = 0,
                    fixKeyMaxWidth    = 0,
                    occupiedHorSpace  = 0,
                    rowHeight         = 0,
                    stretchedHorSpace = 0,
                    ctr               = null;

                for (var i=0; i &lt; t.kids.length; i++) {
                    var k = t.kids[i];

                    ctr = k.constraints;

                    // next row detected
                    if (ctr !== null &amp;&amp; ctr.row &gt; row) {
                        break;
                    }

                    if (ctr.row === row &amp;&amp; k.isVisible === true) {
                        var ps = k.getPreferredSize();

                        if (typeof ctr.size === &#x27;undefined&#x27; || ctr.size === null) {
                            if (fixKeyMaxWidth &lt; ps.width) fixKeyMaxWidth = ps.width;
                            fixKeys ++;
                        } else {
                            if (ctr.size === &quot;ps&quot;) {
                                prefKeys++;
                            } else {
                                stretchedKeys++;
                                stretchedHorSpace += ps.width;
                            }
                            occupiedHorSpace += ps.width;
                        }

                        if (rowHeight &lt; ps.height) rowHeight = ps.height;
                    }
                }

                // no row exists
                if (ctr === null || ctr.row &lt; row) {
                    return null;
                }

                return {
                    keys             : fixKeys + prefKeys + stretchedKeys,
                    fixKeys          : fixKeys,
                    prefKeys         : prefKeys,
                    stretchedKeys    : stretchedKeys,
                    rowHeight        : rowHeight,
                    fixKeyMaxWidth   : fixKeyMaxWidth,
                    occupiedHorSpace : occupiedHorSpace,
                    stretchedHorSpace: stretchedHorSpace
                };
            };
        }
    ]);

    pkg.ShiftKeyArrow = zebkit.Class(ui.View, [
        function(bg, lnCol) {
            if (arguments.length &gt; 1) {
                this.lineColor = lnCol;
            }

            if (arguments.length &gt; 0) {
                this.bg = bg;
            }
        },

        function $prototype() {
            this.prefSize = 10;
            this.lineColor = &quot;white&quot;;
            this.bg = null;

            //       / \A
            //      /   \
            //     /     \
            //    / C  F  \
            // B ^^^|  |^^^ G
            //      |__|
            //     D    E
            //
            // Proportions:
            //     AC = FG = w / 4
            //     CF = w / 2
            //     w =  h / 2
            this.outline = function(g,x,y,w,h,d) {
                x += 4;
                y += 4;
                w -= 8;
                h -= 8;

                var cx = x + Math.floor(w / 2),
                    ww = Math.floor(h / 2),
                    dw = Math.floor(h / 4),
                    dt = g.lineWidth/2;

                g.beginPath();
                g.moveTo(cx, y);                      // A
                g.lineTo(cx - ww + dt, y + ww + dt);  // B
                g.lineTo(cx - dw - dt, y + ww + dt);  // C
                g.lineTo(cx - dw - dt, y + h - dt);   // D
                g.lineTo(cx + dw + dt, y + h - dt);   // E
                g.lineTo(cx + dw + dt, y + ww + dt);  // F
                g.lineTo(cx + ww - dt, y + ww + dt);  // G
                g.lineTo(cx, y);                      // A
                return true;
            };

            this.paint = function(g,x,y,w,h,d) {
                this.outline(g,x,y,w,h,d);

                if (this.lineColor !== null) {
                    g.setColor(this.lineColor);
                    g.stroke();
                }

                if (this.bg !== null) {
                    g.setColor(this.bg);
                    g.fill();
                }
            };

            this.getPreferredSize = function() {
                return {
                    width : this.prefSize,
                    height: this.prefSize
                };
            };
        }
    ]);

    pkg.HintPan = Class(ui.Panel, [
        function() {
            this.$super();
            this.add(new this.clazz.Label(&quot;&quot;));
        },

        function $clazz() {
            this.Label = Class(ui.Label, []);
        },

        function setValue(v) {
            this.kids[0].setValue(v);
        }
    ]);

    var tooltip = null;

    pkg.VKeyBase = Class(ui.Button, [
        function(v) {
            if (zebkit.isString(v) === false &amp;&amp;
                zebkit.instanceOf(v, ui.Panel) === false &amp;&amp;
                (v instanceof Image) === false)
            {
                v = ui.$view(v);

                if (zebkit.instanceOf(v, ui.ViewSet)) {
                    this.statusViews    = v;
                    this.statusViewKeys = [];
                    this.statusKeyIndex = 0;
                    for(var k in v.views) {
                        this.statusViewKeys.push(k);
                    }
                    this.statusViews.activate(this.statusViewKeys[0]);
                }
                v = new ui.ViewPan().setView(v);
                this.$super(v);
                this.setLayout(new zebkit.layout.StackLayout());
            } else {
                this.$super(v);
            }
        },

        function $clazz() {
            this.padding = 1;
            this.Label = Class(ui.Label, []);
            this.Label.font = new ui.Font(&quot;Arial&quot;, &quot;bold&quot;, 14);
        },

        function $prototype() {
            this.$isVkElement = true;
            this.canHaveFocus = false;
            this.statusViews  = null;

            this.showHint = function(ch) {
                this.hideHint();

                if (tooltip === null) {
                    tooltip = new pkg.HintPan();
                }

                tooltip.setValue(ch);
                tooltip.toPreferredSize();
                var rl = zebkit.layout.toParentOrigin(this);
                if (rl.y - tooltip.height &gt; 0) {
                    tooltip.setLocation(rl.x, rl.y - tooltip.height);
                } else {
                    tooltip.setLocation(rl.x, rl.y + this.height);
                }
                tooltip.setSize(this.width, tooltip.height);
                ui.showWindow(this, &quot;info&quot;, tooltip);
            };

            this.hideHint = function() {
                if (tooltip !== null) tooltip.removeMe();
            };

            this.findVK = function(id) {
                var p = this.parent;
                while (p !== null &amp;&amp; typeof p[id] === &#x27;undefined&#x27;) p = p.parent;
                return p;
            };

            this.setLabel = function(l) {
                if (zebkit.instanceOf(this.kids[0], ui.Label)) {
                    this.kids[0].setValue(l);
                }
            };

            this.getLabel = function() {
                return zebkit.instanceOf(this.kids[0], ui.Label) ? this.kids[0].getValue() : null;
            };

            this.nextStatusView = function() {
                if (this.statusViews !== null) {
                    this.statusKeyIndex = (this.statusKeyIndex + 1) % this.statusViewKeys.length;
                    this.statusViews.activate(this.statusViewKeys[this.statusKeyIndex]);
                    this.repaint();
                }
            };
        },

        function pointerPressed(e) {
            this.$super(e);
            this.nextStatusView();
        }
    ]);

    // 1) &quot;A&quot; single character key
    //   {  ch: &quot;A&quot; }
    //
    // 2) General virtual key pattern
    //   {
    //      ch  : &lt;ch&gt;,
    //      code: &lt;code&gt;,
    //      mask: &quot;altKey&quot;,
    //      label | view | icon : &lt;?&gt;
    //   }
    //
    // 3) Character shortcut:
    // &quot;A&quot;
    //
    // 4) Multiple single char VK variants:
    //    &quot;ABCD&quot;
    //
    // 5) Multiple character single key
    //    [ &quot;AA&quot; ]  or with variants [ &quot;AA&quot;, [&quot;BB&quot;], [&quot;CC&quot;] ]
    //
    pkg.VKey = Class(pkg.VKeyBase, [
        function(t) {
            if (zebkit.isString(t)) {
                t = { ch : t };
            }

            this.mask   = typeof t.mask   === &#x27;undefined&#x27; ? null  : t.mask;
            this.ch     = typeof t.ch     === &#x27;undefined&#x27; ? null  : t.ch;
            this.code   = typeof t.code   === &#x27;undefined&#x27; ? 0     : t.code;
            this.hint   = typeof t.hint   === &#x27;undefined&#x27; ? null  : t.hint;
            this.repeat = typeof t.repeat === &#x27;undefined&#x27; ? false : t.repeat;

            if (this.repeat !== false) {
                this.setFireParams(true, t.repeat);
            }

            this.$super(t.view || t.icon || t.label || this.ch);
        },

        function $prototype() {
            this.$sticked = false;

            this.$syncMask = function(mask, value) {
                if (this.mask === mask &amp;&amp; value === true) {
                    this.$sticked = !this.$sticked;
                    this.setState(this.$sticked ? &quot;pressed.over&quot; : &quot;over&quot;);
                    this.nextStatusView();
                }
            };

            this.fired = function() {
                if (this.ch !== null) {
                    this.fireVkTyped(this.code, this.ch, this.mask);
                } else {
                    // handle period keys
                    if (this.firePeriod &gt; 0 &amp;&amp;
                        this.$repeatTask !== null &amp;&amp;
                        this.$repeatTask.isStarted === true)
                    {

                        this.fireVkPressed(this.code, this.ch, this.mask);
                    }
                }
            };

            this.fireVkTyped = function(code, ch, mask) {
                var vk = this.findVK(&quot;vkTyped&quot;);
                if (vk !== null) {
                    vk.vkTyped(this, code, ch, mask);
                }
            };

            this.fireVkReleased = function(code, ch, mask) {
                this.hideHint();

                var vk = this.findVK(&quot;vkReleased&quot;);
                if (vk !== null) {
                    vk.vkReleased(this, code, ch, mask);
                }
            };

            this.fireVkPressed = function(code, ch, mask) {
                var vk = this.findVK(&quot;vkPressed&quot;);
                if (vk !== null) {
                    vk.vkPressed(this, code, ch, mask);
                }

                if (ch !== null &amp;&amp; this.hint !== null) {
                    this.showHint(this.hint !== null ? ch : this.hint);
                }
            };

            this.upperCase = function() {
                if (this.ch !== null) {
                    var l = this.getLabel();
                    if (l !== null &amp;&amp; l.toLowerCase() === this.ch.toLowerCase()) {
                        this.setLabel(l.toUpperCase());
                    }
                }
            };

            this.lowerCase = function() {
                if (this.ch !== null) {
                    var l = this.getLabel();
                    if (l !== null &amp;&amp; l.toLowerCase() === this.ch.toLowerCase()) {
                        this.setLabel(l.toLowerCase());
                    }
                }
            };
        },

        function _pointerPressed(e) {
            if (this.$sticked === true) {
                this.$sticked = false;
                this.$getSuper(&quot;_pointerReleased&quot;).call(this, e);
                this.fireVkReleased(this.code, this.ch, this.mask);
            } else {
                this.$super(e);
                this.fireVkPressed(this.code, this.ch, this.mask);
                if (this.mask !== null) {
                    this.$sticked = true;
                }
            }
        },

        function _pointerReleased(e) {
            if (this.mask === null) {
                this.$super(e);
                this.fireVkReleased(this.code, this.ch, this.mask);
            }
        }
    ]);

    pkg.ArrowView = Class(ui.ArrowView, [
        function $prototype() {
            this.gap = 0;
            this.color = &quot;white&quot;;
            this.height = this.width = 8;
        }
    ]);

    pkg.PredefinedVKey = {
        shift : {
            view: {
                &quot;on&quot; : new pkg.ShiftKeyArrow(),
                &quot;off&quot;: new pkg.ShiftKeyArrow()
            },
            code : &quot;Shift&quot;,
            mask : &quot;shiftKey&quot;
        },

        left: {
            code : &quot;ArrowLeft&quot;,
            view : new pkg.ArrowView(&quot;left&quot;),
            firePeriod: 150
        },

        right: {
            code : &quot;ArrowRight&quot;,
            view : new pkg.ArrowView(&quot;right&quot;),
            repeat: 150
        },

        up: {
            code : &quot;ArrowUp&quot;,
            view : new pkg.ArrowView(&quot;top&quot;),
            repeat: 150
        },

        down: {
            code : &quot;ArrowDown&quot;,
            view : new pkg.ArrowView(&quot;bottom&quot;),
            repeat: 150
        },

        enter : {
            //          |  A
            //     E    |
            // C /______|  B
            //   \ D
            //
            view: ui.$view(function(g, x, y, w, h, d) {
                var gap = 6;
                g.setColor(&quot;orange&quot;);
                g.beginPath();
                g.lineWidth = 2;
                g.moveTo(x + w - gap, y + gap);          // A
                g.lineTo(x + w - gap, y + h - 2*gap);  // AB
                g.lineTo(x + gap, y + h - 2*gap);      // BC
                g.lineTo(x + 2*gap, y + h - gap);      // CD
                g.moveTo(x + gap - 1, y + h - 2*gap);      // C
                g.lineTo(x + 2*gap, y + h - 3 * gap);      // CE
                g.stroke();
            }),
            ch : &quot;\n&quot;,
            hint: null
        },

        space : {
            label: &quot;Space&quot;,
            ch   : &quot; &quot;,
            size : &quot;stretched&quot;,
            hint : null
        },

        backspace: {
            code: &quot;Backspace&quot;,
            label: &quot;&lt;=&quot;,
            view2: ui.$view(function(g, x, y, w, h, d) {
                g.setColor(&quot;black&quot;);
                g.beginPath();
                g.lineWidth = 2;
                g.moveTo(x + w - 2, y + h - 8);  // B
                g.lineTo(x + 6, y + h - 8);      // BC
                g.lineTo(x + 12, y + h - 4);      // CD
                g.moveTo(x + 6, y + h - 8);      // C
                g.lineTo(x + 12, y + h -12);      // CE
                g.stroke();
            }),
            repeat: 150,
            size: &quot;ps&quot;,
            hints: &quot;backspace&quot;
        }
    };

    pkg.VKeyOption = Class(pkg.VKeyBase, [
        function (v, options) {
            this.$super(v);
            this.menu = new this.clazz.Menu(options);
            this.menu.toPreferredSize();
            this.menu.$isVkElement = true;

            this.options = options.slice(0);
            var $this = this;
            this.menu.on(function(src, i) {
                if (src.selectedIndex &gt;= 0) {
                    var vk = $this.findVK(&quot;vkOptionSelected&quot;);
                    if (vk !== null) {
                        vk.vkOptionSelected($this,
                                            src.selectedIndex,
                                            $this.options[src.selectedIndex]);
                    }
                }
            });
        },

        function $clazz() {
            this.Menu = Class(ui.Menu, [
                function $prototype() {
                    this.canHaveFocus = false;
                }
            ]);
        },

        function $prototype() {
            this.fired = function() {
                if (this.menu.parent !== null) {
                    this.menu.removeMe();
                } else {
                    var o = zebkit.layout.toParentOrigin(this);
                    this.menu.select(-1);
                    this.menu.toPreferredSize();
                    this.menu.setLocation(o.x, o.y - this.menu.height);
                    ui.showPopupMenu(this, this.menu);
                }
            };
        }
    ]);

    var RL = Class(zebkit.layout.RasterLayout, [
        function calcPreferredSize(t) {
            var w = 0, h = 0;
            for (var i = 0; i &lt; t.kids.length; i++) {
                if (t.kids[i].isVisible === true) {
                    var ps = t.kids[i].getPreferredSize();
                    w += ps.width;
                    h += ps.height;
                }
            }
            return { width: w, height: h };
        }
    ]),

    KE = new pkg.KeyEvent();
    KE.device = &quot;vkeyboard&quot;;

    pkg.VKeys = Class(pkg.VKey, [
        function(chars) {
            if (chars.length &lt; 2) {
                throw new Error();
            }

            this.$super( {
                ch    : chars[0],
                label : new this.clazz.KeysLabelPan(chars)
            });

            if (chars.length &gt; 2) {
                this.keysPopupPan = new this.clazz.KeysPopupPan();

                var $this = this;
                for(var i = 1; i &lt; chars.length; i++) {
                    var key = pkg.createVKey(chars[i]);
                    key.extend([
                        function findVK(id) {
                            return $this.findVK(id);
                        },

                        function fireVkReleased(code, ch, mask) {
                            this.$super(code, ch, mask);
                            $this.hideKeysPopupPan();
                        }
                    ]);
                    this.keysPopupPan.add(key);
                }
            } else {
                this.altCh = chars[1];
            }
        },

        function $clazz () {
            this.layout = new zebkit.layout.BorderLayout();

            this.SmallLabel = Class(ui.Label, []);
            this.SmallLabel.font = new ui.Font(pkg.VKey.Label.font.name, Math.floor((2*pkg.VKey.Label.font.height)/3));

            this.KeysPopupPan = Class(ui.Panel, [
                function $clazz() {
                    this.layout     = new zebkit.layout.FlowLayout(&quot;left&quot;, &quot;center&quot;, &quot;horizontal&quot;, 6);
              		this.padding    = 6;
              		this.border     = new ui.Border(&quot;plain&quot;);
              		this.background = &quot;rgba(200,200,200,0.8)&quot;;
                },

                function $prototype() {
                    this.$dontGrabFocus = this.$isVkElement = true;
                },

                function() {
                    this.$super();
                }
            ]);

            this.KeysLabelPan = Class(ui.Panel, [
                function $clazz() {
                    this.layout = new RL(true);
                },

                function(chars) {
                    this.$super();
                    this.constraints = &quot;center&quot;;

                    var mainLab = new pkg.VKeys.Label(chars[0]),
                        altLab  = new pkg.VKeys.SmallLabel(chars.length === 2 ? chars[1] : &quot;...&quot;);

                    mainLab.constraints = &quot;center&quot;;
                    altLab.constraints  = &quot;topRight&quot;;
                    this.add(mainLab);
                    this.add(altLab);

                    this.mainLab = mainLab;
                }
            ]);
        },

        function $prototype() {
            this.keysPopupPan = null;

            this.getLabel = function() {
                return this.kids[0].mainLab.getValue();
            };

            this.setLabel = function(l) {
                this.kids[0].mainLab.setValue(l);
            };

            this.showKeysPopupPan = function() {
                this.hideHint();

                if (this.keysPopupPan === null) {
                    this.$counter = (this.$counter + 1 ) % 2;
                    this.showHint(this.$counter === 0 ? this.ch : this.altCh);
                } else {
                    this.$pressed.shutdown();

                    var rl = zebkit.layout.toParentOrigin(this);
                    for(var i = 0; i &lt; this.keysPopupPan.kids.length; i++) {
                        this.keysPopupPan.kids[i].setPreferredSize(this.width, this.height);
                    }

                    this.keysPopupPan.toPreferredSize();
                    this.keysPopupPan.setLocation(rl.x, rl.y - this.keysPopupPan.height);

                    this.keysPopupPan.winActivated = function(e) {
                        if (e.isActive === false) {
                            e.source.removeMe();
                        }
                    };

                    ui.showWindow(this, &quot;mdi&quot;, this.keysPopupPan);
                    ui.makeFullyVisible(this.keysPopupPan);
                    ui.activateWindow(this.keysPopupPan);

                    this.setState(&quot;out&quot;);
                }
            };

            this.hideKeysPopupPan = function() {
                if (this.keysPopupPan !== null) {
                    this.keysPopupPan.removeMe();
                }
            };
        },

        function fireVkPressed(code, ch, mask) {
            this.$counter = 0;
            this.hideKeysPopupPan();
            this.$super(code, ch, mask);

            var $this = this;
            this.$pressed = zebkit.util.tasksSet.run(function(t) {
                $this.showKeysPopupPan(t);
            }, 700, 700);
        },

        function fireVkTyped(code, ch, mask) {
            if (this.keysPopupPan === null) {
                ch = this.$counter &gt; 0 ? this.altCh : this.ch;
                this.$super(ch.charCodeAt(0), ch, mask);
            } else  if (this.keysPopupPan.parent === null) {
                this.$super(code, ch, mask);
            }
        },

        function fireVkReleased(code, ch, mask) {
            this.$pressed.shutdown();
            this.$super(code, ch, mask);
        }
    ]);

    pkg.showVK = function(input) {
        pkg.$vk.show(input);
    };

    pkg.getVK = function() {
        return pkg.$vk;
    };

    pkg.createVKey = function(d) {
        if (zebkit.isString(d)) {
            if (pkg.PredefinedVKey.hasOwnProperty(d.toLowerCase())) {
                d = pkg.PredefinedVKey[d.toLowerCase()];
            } else if (d.length &gt; 1) {
                return new pkg.VKeys(d);
            }
        } else {
            if (Array.isArray(d)) {
        		return d.length === 1 ? new pkg.VKey (d[0])
                                      : new pkg.VKeys(d);
            } else if (d.hasOwnProperty(&quot;vkey&quot;)) {
                return d.vkey;
            }
        }

        return new pkg.VKey(d);
    };

    pkg.VK = Class(ui.Panel, [
        function() {
            this.$super();
            this._     = new this.clazz.Listeners();
            this.masks = {
                shiftKey : false,
                metaKey  : false,
                ctrlKey  : false,
                altKey   : false
            };
        },

        function $clazz() {
            this.Listeners = zebkit.util.ListenersClass(&quot;vkMaskUpdated&quot;, &quot;vkOptionSelected&quot;);
        },

        function $prototype() {
            this.$dontGrabFocus = true;

            this.eachGroupKey = function(g, f) {
                g = this.getGroupPan(g);
                if (g !== null) {
                    for(var i = 0; i &lt; g.kids.length; i++) {
                        var k = g.kids[i];
                        f.call(this, g, k);
                    }
                }
            };

            this.eachKey = function(f) {
                for(var i = 0; i &lt; this.kids.length; i++) {
                    this.eachGroupKey(this.kids[i].name, f);
                }
            };

            this.show = function(d) {
                this.removeMe();
                if (d !== null) {
                    this.constraints = &quot;bottom&quot;;
                    this.toPreferredSize();

                    if (pkg.makeEditorVisible === true) {
                        var p = zebkit.layout.toParentOrigin(d);
                        if (p.y + d.height &gt; this.height) {
                            this.constraints = &quot;top&quot;;
                        }
                    }

                    ui.showWindow(d, &quot;mdi&quot;, this);
                    var win = this.getCanvas().getLayer(&quot;win&quot;);
                    this.setSize(win.width - win.getLeft() - win.getRight(), this.height);
                    ui.activateWindow(this);
                }
            };

            this.onMask = function(mask, vk) {
                if (mask !== null &amp;&amp; (this.masks.hasOwnProperty(mask) === false || this.masks[mask] !== true)) {
                    this.masks[mask] = true;
                    this.vkMaskUpdated(vk, mask, true);
                }
            };

            this.offMask = function(mask, vk) {
                if (mask !== null &amp;&amp; this.masks.hasOwnProperty(mask) &amp;&amp; this.masks[mask] === true) {
                    this.masks[mask] = false;
                    this.vkMaskUpdated(vk, mask, false);
                }
            };

            this.vkOptionSelected = function(vkey, index, option) {
                this._.vkOptionSelected(vkey, index, option);
            };

            this.hasMaskSet = function(mask) {
                if (mask.match(/^[a-z]+Key$/) === null) {
                    throw new Error(&quot;Invalid mask &#x27;&quot; + mask + &quot;&#x27;&quot;);
                }
                return this.masks.hasOwnProperty(mask) &amp;&amp; this.masks[mask] === true;
            };

            this.vkMaskUpdated = function(vkey, mask, value) {
                if (typeof mask === &#x27;undefined&#x27; || mask === null) throw new Error();

                this.eachKey(function(group, key) {
                    if (key !== vkey &amp;&amp; key.mask !== null &amp;&amp; key.mask === mask) {
                        key.$syncMask(mask, value);
                    }
                });

                this._.vkMaskUpdated(vkey, mask, value);
            };

            this.vkPressed = function (vk, code, key, mask) {
                if (mask !== null) {
                    this.onMask(mask, vk);
                }

                KE.key = key;
                KE.code = code;
                KE.withMasks(this.masks);
                this.getCanvas().$keyPressed(KE);
            };

            this.vkTyped = function (vk, code, key, mask) {
                KE.key = this.hasMaskSet(&quot;shiftKey&quot;) ? key.toUpperCase() : key;
                KE.code = code;
                KE.withMasks(this.masks);
                this.getCanvas().$keyTyped(KE);
            };

            this.vkReleased = function(vk, code, key, mask) {
                if (mask !== null) {
                    this.offMask(mask, vk);
                }
                KE.key = key;
                KE.code = code;
                KE.withMasks(this.masks);
                this.getCanvas().$keyReleased(KE);
            };

            this.setActiveGroup = function(name) {
                if (this.group !== name) {
                    this.group = name;
                    for(var i = 0; i &lt; this.kids.length; i++) {
                        var k = this.kids[i];
                        k.setVisible(k.name === name);
                    }

                    // adjust size if VK is shown
                    var can = this.getCanvas();
                    if (can !== null &amp;&amp; can.hasOwnProperty(&quot;win&quot;) === true) {
                        var win = can.getLayer(&quot;win&quot;);
                        this.toPreferredSize();
                        this.setSize(win.width - win.getLeft() - win.getRight(), this.height);
                    }
                }
            };

            this.getGroupPan = function(name) {
                for(var i = 0; i &lt; this.kids.length; i++) {
                    var k = this.kids[i];
                    if (k.name === name) return k;
                }
                return null;
            };

            this.setGroups = function(groups) {
                for(var k in groups) {
                    if (groups.hasOwnProperty(k)) {
                        this.addGroup(k, groups[k]);
                    }
                }
            };

            this.addGroup = function(name, layout) {
                var group = new ui.Panel(new pkg.VKLayout());
                group.name = name;

                for(var row = 0; row &lt; layout.length; row++) {
                    var r = layout[row];
                    for(var col = 0; col &lt; r.length; col++) {
                        var v = r[col];

                        if (zebkit.isString(v)) {
                            if (pkg.PredefinedVKey.hasOwnProperty(v)) {
                                v = pkg.PredefinedVKey[v];
                            }
                        }

                        group.add({
                            row : row,
                            size: v.size
                        }, pkg.createVKey(v));
                    }
                }
                this.add(group);
            };
        },

        function setParent(p) {
            // mean the vk is removed from its parent
            if (p === null &amp;&amp; this.parent !== null) {
                // remove other VK related elements
                for(var i = this.parent.kids.length - 1; i &gt;= 0; i--) {
                    var kid = this.parent.kids[i];
                    if (kid.$isVkElement === true) {
                        kid.removeMe();
                    }
                }
            }

            this.$super(p);
        }
    ]);

    pkg.activateVK = function() {
        pkg.$vk = new pkg.VK();
        return pkg.$vk;
    };

    function $isVkElement(c) {
        var p = c;
        while (p !== null &amp;&amp; p.$isVkElement !== true) p = p.parent;
        return p !== null;
    }

    ui.events.on({
        focusGained : function (e) {
            if (pkg.$vk !== null &amp;&amp; $isVkElement(e.source) === false &amp;&amp; typeof e.source.vkMode !== &#x27;undefined&#x27;) {
                pkg.showVK(zebkit.instanceOf(e.source, ui.TextField) ? e.source : null);
            }
        },

        pointerPressed : function(e) {
            if (pkg.$vk !== null) {
                if (pkg.$vk.parent !== null &amp;&amp;
                    $isVkElement(e.source) === false &amp;&amp;
                    zebkit.layout.isAncestorOf(pkg.$vk, e.source) === false)
                {
                    pkg.showVK(null);
                }

                // if input component holds focus, virtual keyboard is
                // hidden and we press on the input component
                if (pkg.$vk.parent === null &amp;&amp; typeof e.source.vkMode !== &#x27;undefined&#x27;) {
                    pkg.showVK(e.source);
                }
            }
        }
    });

    ui.$configWith(pkg);
});

</pre>

</div>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>

</body>
</html>
